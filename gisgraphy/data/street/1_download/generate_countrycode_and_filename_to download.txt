#

CREATE TABLE streetosm2
(
  id serial PRIMARY KEY,
  "name" character varying(68),
  "location" geometry,
  "type" character varying(20),
  length integer,
  gid serial,
  oneway character varying(9),
  shape geometry NOT NULL,
  countrycode character varying(3),
  CONSTRAINT streetosm_gid_key UNIQUE (gid)
)

SELECT setval('public.street_osm_sequence', 259623, true);
SELECT setval('public.streetosm_gid_key', 169852, true);



WITH (OIDS=FALSE);
ALTER TABLE streetosm OWNER TO postgres;


#urls.txt
\f ','
\a
\t
\o urls.txt
select 'downloads.cloudmade.com/'||continent ||'/'||lower(replace(name,' ', '_'))||'/'||lower(replace(name,' ', '_'))||'.shapefiles.zip' from country_work order by id ;
\q 

#countrycode.txt
\f ','
\a
\t
\o countrycode.txt
select countrycode||'.zip' from country_work order by id ;
\q 

#usurls.txt
\f ','
\a
\t
\o usurls.txt
select 'downloads.cloudmade.com/north_america/united_states/'||lower(replace(name,' ', '_'))||'/'||lower(replace(name,' ', '_'))||'.shapefiles.zip' from ADM where level=1 and countrycode='US' order by id;   
\q 

#usfilename.txt
\f ','
\a
\t
\o usfilename.txt
select 'US.'||lower(replace(name,' ', '_'))||'.zip' from ADM where level=1 and countrycode='US' order by id;
\q 

 
 
  psql -U postgres  -c  "CREATE DATABASE openstreetmap WITH TEMPLATE = template0 ENCODING = 'UTF8';"
 createlang -U postgres plpgsql openstreetmap
 
 psql -U postgres  -d openstreetmap -f /usr/share/postgresql-8.3-postgis/lwpostgis.sql
 psql -U postgres  -d openstreetmap -f /usr/share/postgresql-8.3-postgis/spatial_ref_sys.sql 
 
 
 CREATE TABLE "street" (gid serial PRIMARY KEY,
"type" varchar(23),
"name" varchar(119),
"oneway" varchar(9));
SELECT AddGeometryColumn('','street','shape','-1','MULTILINESTRING',2);


INSERT INTO "street" ("type","name","oneway",shape)